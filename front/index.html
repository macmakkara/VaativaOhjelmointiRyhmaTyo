<!DOCTYPE html>
<html ng-app="main">

<head>
    <title>Jani Rantanen - testipenkki </title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.css">


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.6/angular.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js"></script>

    <script type="text/javascript" src="js/app.js"></script>
    <script type="text/javascript" src="js/services.js"></script>


</head>

<body ng-cloak>

    <div class="container" ng-controller="mainController">

        <nav class="navbar navbar-default">

            <div class="container-fluid">

                <div class="navbar-header">

                    <a class="navbar-brand" href="#"> SimpleClient </a>

                    <ul class="nav navbar-nav">
                        <!-- <li><a href="#" ng-click="naytaKirjautuminen()">Kirjaudu</a></li> -->

                        <p ng-show="serverStatus">
                            <span class="label label-success">Yhteys palvelimeen ok</span>
                        </p>

                        <p ng-hide="serverStatus">
                            <span class="label label-danger">Ei yhteyttä palvelimeen </span>
                        </p>


                        Sanitycheck_view: {{sanitycheck_view}}
                        <br /> Sanitycheck_service: {{sanitycheck_service}}
                        <br/>
                        <br/>
                        <div class="row col-md-12">
                            Viimeisin ilmoitus back-endistä:
                            <span class="label" ng-class="{'label-success': viesti.status == 200 ,'label-danger': viesti.status !== 200}">{{viesti.data}}</span>
                        </div>


                    </ul>

                </div>

            </div>

        </nav>




        <div id="debug" ng-cloak>

            <button type="button" class="btn btn-default" ng-click="tyhjennaPisteet()">Tyhjennä kanta (Scores)</button>
            <br />
            <br />
            TODO: Sivun automaattinen päivitys. (Listat ei päivity jokaisen lähetyksen jälkeen, vaan pitää päivittää sivu)
            <div class="row">
                <h1 class="text-center">Pisteiden lähetys (DEBUG)</h1>
                
                <div class="form-group">
                    <label for="game_id" class="col-md-1 control-label">Game_id</label>
                    <input type="text" class="col-md-3" name="game_id" ng-model="mockPisteet.game_id" class="form-control">
                </div>

                <br />
                <br />
            

                <div class="form-group">
                    <label for="player" class="col-md-1 control-label">Player</label>
                    <input type="text" class="col-md-3" name="player" ng-model="mockPisteet.player" class="form-control">
                </div>

                <br />
                <br />

                <div class="form-group">
                    <label for="Score" class="col-md-1 control-label">Score</label>
                    <input type="text" class="col-md-3" name="score" ng-model="mockPisteet.score" class="form-control">
                </div>

                <br />
                <br />

                <div class="form-group">
                    <label for="gametoken" class="col-md-1 control-label">Gametoken</label>
                    <input type="text" class="col-md-3" name="gametoken" ng-model="mockPisteet.gametoken" class="form-control">
                </div>

                <br />
                <br />

                <button type="button" class="btn btn-default" ng-click="LuoMockPisteet()">Luo satunnainen pistedata</button>
                <button type="button" class="btn btn-default" ng-click="lahetaPisteet(mockPisteet)">Lähetä pisteet</button>


            </div>

            <hr> mockPisteet {{mockPisteet}}

            <div class="form-group">
                <label for="peli_nimi" class="col-md-1 control-label">Peli_nimi</label>
                <input type="text" class="col-md-3" name="peli_nimi" ng-model="mockPeli.peli_nimi" class="form-control">
            </div>

            <br />
            <br />

            <button type="button" class="btn btn-default" ng-click="lahetaPeli(mockPeli)">Lähetä uusi peli</button>

            <h1> Pelilista</h1>
            <div ng-repeat="(key, value) in pelilista track by $index">
                {{key}}: {{value}}
                <br />
            </div>




            <h1> Kaikkien pelien ja pelaajien pisteet</h1>
            <table class="table">
                <thead>
                    <tr>
                        <th>Id</th>
                        <th>Peli</th>
                        <th>Pelaaja</th>
                        <th>Pisteet</th>
                        <th>Pelitoken</th>
                        <th>Timestamp</th>
                    </tr>
                </thead>

                <tbody ng-repeat="pisteet in kaikkipisteet track by $index">
                    <td>{{pisteet._id}}</td>
                    <td>{{pisteet.game.peli_nimi}}</td>
                    <td>{{pisteet.player}}</td>
                    <td>{{pisteet.score}}</td>
                    <td>{{pisteet.gametoken}}</td>
                    <td>{{pisteet.timestamp | date:"dd.MM.yyyy 'klo' HH:mm" }}</td>

                    </tr>
                </tbody>
            </table>
        </div>

    </div>



</body>

</html>